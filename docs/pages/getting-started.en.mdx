import { Callout } from "nextra-theme-docs";

# Getting started

## Choosing an API

Before start using the API you should decide whether you want to use our GraphQL or REST API.

### GraphQL

<Callout type="warning" emoji="⚠️">
  Our GraphQL API is still work in progress and some feature like filtering and
  sorting is not possible at the moment!
</Callout>

The advantage of GraphQL is that you can precisly specify which data you need and therefore prevent over- or underfetching of data.

To use the GraphQL API you have to make `POST` request to the GraphQL `/graphql` endpoint.
Run the following command to get a overview of the schema.

```shell
curl -X POST -H "Content-Type: application/json" -d '{"query": "{\_\_schema {queryType {fields {name description args {name} } } } }"}' https://api.potterdb.com/graphql
```

#### Example

Listing the name of the first 5 characters.

```shell
curl -X POST -H "Content-Type: application/json" -d '{"query": "query{ characters(first: 5) { edges{ node{ name } } } }"}' https://api.potterdb.com/graphql
```

<details>
  <summary>Response</summary>
  ```json
  {
    "data": {
      "characters": {
        "edges": [
          {
            "node": {
              "name": "'Handsome Poltergeist'"
            }
          },
          {
            "node": {
              "name": "'Mrs Next Door'"
            }
          },
          {
            "node": {
              "name": "1992 Gryffindor vs Slytherin Quidditch match spectators"
            }
          },
          {
            "node": {
              "name": "1996 Gryffindor Quidditch Keeper trials spectators"
            }
          },
          {
            "node": {
              "name": "19th-century Flying Instructor"
            }
          }
        ]
      }
    }
  }
```

</details>

### REST

To use the REST API you have to make a `GET` request to one of the endpoints of the REST API.

Visit https://api.potterdb.com to get an overview of all the available endpoints.

#### Example

Showing the character "Harry Potter".

```shell
curl https://api.potterdb.com/v1/characters/harry-potter
```

<details>
  <summary>Response</summary>
  ```json
  {
    "data": {
      "id": "bc9a37f1-4831-4246-a4a2-ebbce26eff72",
      "type": "character",
      "attributes": {
        "slug": "harry-potter",
        "name": "Harry James Potter",
        "born": "31 July 1980, Godric's Hollow, West Country, England, Great Britain",
        "died": null,
        "gender": "Male",
        "species": "Human",
        "height": null,
        "weight": null,
        "hair_color": "Jet-black",
        "eye_color": "Bright green",
        "skin_color": "Light",
        "blood_status": "Half-blood",
        "marital_status": "Married",
        "nationality": "English",
        "animagus": null,
        "boggart": "Dementor",
        "house": "Gryffindor",
        "patronus": "Stag",
        "alias_names": [
          "The Boy Who Lived",
          "The Chosen One",
          "Undesirable No. 1",
          "Lightning (by Potterwatch)",
          "The Boy Who Lied (by the Daily Prophet)",
          "Gregory Goyle (under disguise of Polyjuice Potion)",
          "Neville Longbottom (the name he told Stanley Shunpike in his third year)",
          "Barny Weasley (under disguise of Polyjuice Potion)",
          "Vernon Dudley (the name he used to disguise his identity from Snatchers)",
          "Albert Runcorn (under disguise of Polyjuice Potion)",
          "Potty (by Peeves and Slytherins)"
        ],
        "family_members": [
          "James Potter I (father) †",
          "Lily J. Potter (née Evans) (mother) †",
          "Ginevra Potter (née Weasley) (wife)",
          "James Potter II (son)",
          "Albus Potter (son)",
          "Lily L. Potter (daughter)",
          "Arthur Weasley (father-in-law)",
          "Molly Weasley (née Prewett) (mother-in-law)",
          "William Weasley (brother-in-law)",
          "Charles Weasley (brother-in-law)",
          "Percy Weasley (brother-in-law)",
          "Fred Weasley (brother-in-law) †",
          "George Weasley (brother-in-law)",
          "Ronald Weasley (brother-in-law)",
          "Fleur Weasley (née Delacour) (sister-in-law)",
          "Audrey Weasley (sister-in-law)",
          "Angelina Weasley (née Johnson) (sister-in-law)",
          "Hermione Granger (sister-in-law)",
          "Victoire Weasley (niece-in-law)",
          "Dominique Weasley (niece-in-law)",
          "Louis Weasley (nephew-in-law)",
          "Molly Weasley II (niece-in-law)",
          "Lucy Weasley (niece-in-law)",
          "Fred Weasley II (nephew-in-law)",
          "Roxanne Weasley (niece-in-law)",
          "Rose Granger-Weasley (niece-in-law)",
          "Hugo Granger-Weasley (nephew-in-law)",
          "Fleamont Potter (paternal grandfather) †",
          "Euphemia Potter (paternal grandmother) †",
          "Mr Evans (maternal grandfather) †",
          "Mrs Evans (maternal grandmother) †",
          "Petunia Dursley (née Evans) (maternal aunt/guardian) †",
          "Vernon Dursley (maternal uncle by marriage/guardian)",
          "Dudley Dursley (maternal first cousin)",
          "Mrs Dursley (maternal first cousin-in-law)",
          "Hardwin Potter (paternal ancestor) †",
          "Iolanthe Potter (née Peverell) (paternal ancestor) †",
          "Linfred of Stinchcombe (paternal ancestor) †",
          "Mr Peverell (paternal ancestor) †",
          "Ignotus Peverell (paternal ancestor) †",
          "Lord Voldemort (paternal distant cousin) †",
          "Delphini (paternal distant cousin)",
          "Potter family",
          "Evans family (maternal family)",
          "Fleamont family (paternal ancestors)",
          "Peverell family (paternal ancestors)",
          "Weasley family (in-laws)",
          "Prewett family (in-laws)",
          "House of Black (in-laws)"
        ],
        "jobs": [
          "Head of British Auror Office (formerly)",
          "Guest lecturer on Defence Against the Dark Arts",
          "Head of the Department of Magical Law Enforcement"
        ],
        "romances": ["Cho Chang (ex-girlfriend)", "Ginevra Potter (wife)"],
        "titles": [
          "Triwizard Champion",
          "Seeker",
          "Quidditch Captain",
          "Master of Death"
        ],
        "wands": [
          "11', Holly, phoenix feather",
          "10¾', Vine, dragon heartstring (temporarily)",
          "10', Blackthorn, unknown core (temporarily)",
          "10', Hawthorn, unicorn hair (temporarily)",
          "15', Elder, thestral hair (temporarily)"
        ],
        "image": "https://static.wikia.nocookie.net/harrypotter/images/9/97/Harry_Potter.jpg",
        "wiki": "https://harrypotter.fandom.com/wiki/Harry_Potter"
      }
    },
    "meta": {
      "copyright": "© 2022 Potter DB API",
      "generated_at": "2022-10-11T09:30:49.628Z"
    },
    "links": {
      "self": "https://api.potterdb.com/v1/characters/harry-potter"
    }
  }
  ```
</details>
## Rate limiting

To prevent malicious usage of the Potter DB API there's an ip-based limit of 900 requests per hour (15 request / minute). If you hit this limit, you will receive a `429 To Many Requests`.

## Authentication

The Potter DB API is free to use and therefore no authentication is required.
